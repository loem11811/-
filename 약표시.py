import streamlit as st
drug_database = {
    "아세트아미노펜": {
        "최종 환경영향 등급": "C (중간위험)",
        "특징": "배설률 높음 (90~100%) 대부분 대사 후 소변으로 배출분해 속도 빠름, 독성 낮음\n-환경에 쉽게 분해되지만, 고농도에서는 수생 생물 독성 가능성 있음",
        "추천 대체 약": "대체 필요 없음 (환경위험 낮음)",
        "폐기 시 유의사항": "-수거함에 넣거나 약국 반납\n-절대 변기나 싱크대에 버리지 말 것 (하천 내 잔류 위험)"
    },
    "이부프로펜": {
        "최종 환경영향 등급": "C (중간 위험)",
        "특징": "-배설률 약 90% 간에서 대사 후 주로 소변으로 배출\n-환경 내 반감기 짧고 분해 빠름\n-다만, 반복 노출 시 어류 생식 독성 가능성 보고됨.",
        "추천 대체 약": "파라세타몰 (아세트아미노펜)",
        "폐기 시 유의사항": "-어린이 손이 닿지 않는 곳 보관.\n-남은 약은 수거함 또는 약국 반납."
    },
    "나프록센": {
        "최종 환경영향 등급": "B (주의필요)",
        "특징": "-배설률 약 95% (빠르게 배설됨)\n-환경에서 분해 속도 느림, 수생 생물에 장기적 독성 가능.\n-일부 하천에서 검출 농도 WHO 권고치 초과 사례 존재.",
        "추천 대체 약": "아세트아미노펜 (환경영향 더 낮음)",
        "폐기 시 유의사항": "-반드시 약국또는 지자체 지정 수거함에 폐기.\n-자기처리 금지 (하수도 유입시 장기 오염)"
    },
    "시프로플록사신": {
        "최종 환경영향 등급": "A (고위험)",
        "특징": "-배설률 40~60% 미대사 상태로 배출\n생분해 매우 어려움, 생물농축 위험 존재\n내성균 유발 가능성, 수생 생물에 독성 강함" ,
        "추천 대체 약": "환경측면에선 대체불가(항생제 필요시 최소 용량 사용 권장)",
        "폐기 시 유의사항": "-절대 개인이 폐기하지 말고 약국에 의무 반납\n-내성균 확산 방지 위해 사용 기한 이후 절대 복용 금지"
    }
}

st.title("약품 정보 검색기")

# 2. 사용자로부터 약 이름 입력받기
search_name = st.text_input(
    "정보를 검색할 약 이름을 입력하세요:",
    placeholder="예: 이부프로펜" # 입력창에 표시될 안내 문구
)

# 3. '검색' 버튼을 누르면 정보 표시
if st.button("검색"):
    if search_name: # 입력값이 있을 경우에만 실행
        # 입력된 이름으로 데이터베이스에서 정보 찾기
        # 사용자가 입력한 앞뒤 공백을 제거하기 위해 .strip() 사용
        info = drug_database.get(search_name.strip())

        if info:
            st.subheader(f"✅ '{search_name}'의 검색 결과입니다.")
            # 찾은 정보를 key와 value로 나누어 보기 좋게 출력
            for key, value in info.items():
                st.markdown(f"**- {key}:** {value}")
        else:
            # 정보를 찾지 못했을 때 오류 메시지 출력
            st.error(f"'{search_name}'에 대한 정보를 찾을 수 없습니다. 약 이름을 확인해주세요.")
    else:
        # 입력값이 없을 때 경고 메시지 출력
        st.warning("약 이름을 입력해주세요.")

# 4. 검색 가능한 약품 목록 안내
st.info(f"현재 검색 가능한 약품 목록: {', '.join(drug_database.keys())}")